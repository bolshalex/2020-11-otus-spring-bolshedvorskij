(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0568bb7b"],{"0283":function(t,o,n){},"4a2a":function(t,o,n){"use strict";n("8a1f")},"555f":function(t,o,n){"use strict";var e=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{staticClass:"lds-dual-ring"})},u=[],r=(n("4a2a"),n("2877")),a={},i=Object(r["a"])(a,e,u,!1,null,null,null);o["a"]=i.exports},"88e1":function(t,o,n){"use strict";n("0283")},"8a1f":function(t,o,n){},adc6:function(t,o,n){"use strict";n.r(o);var e=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",[n("h2",[t._v("Список авторов")]),n("router-link",{attrs:{to:"/"}},[t._v("Home")]),n("hr"),n("AuthorList")],1)},u=[],r=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",[null!==t.author?n("Author",{attrs:{author:t.author,add:null===t.author.id},on:{"save-author":t.saveAuthor,"close-author":t.closeAuthor}}):n("div",[t.loading?n("Loader"):n("ul",[t._l(t.authors,(function(o){return n("li",{key:o.id},[n("a",{staticClass:"author-row",attrs:{href:"#"},on:{click:function(n){return t.viewAuthor(o)}}},[t._v(t._s(o.name))]),n("button",{on:{click:function(n){return t.deleteAuthor(o)}}},[t._v(" Удалить")])])})),n("li",[n("button",{on:{click:t.addAuthor}},[t._v("Добавить")])])],2)],1)],1)},a=[],i=(n("d3b7"),n("555f")),s=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",[n("button",{on:{click:function(o){return t.$emit("close-author")}}},[t._v("Назад")]),n("hr"),n("label",[t._v("Имя автора: "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.author.name,expression:"author.name"}],attrs:{type:"text",readonly:!t.isEdit},domProps:{value:t.author.name},on:{input:function(o){o.target.composing||t.$set(t.author,"name",o.target.value)}}})]),n("div",[t.isEdit?n("button",{on:{click:t.saveAuthor}},[t._v("Сохранить")]):n("button",{on:{click:t.enableEditMode}},[t._v("Редактировать")])])])},l=[],h={name:"Author",props:{author:{type:Object,required:!0},add:{type:Boolean,default:function(){return!1}}},data:function(){return{isEdit:this.add}},methods:{enableEditMode:function(){this.isEdit=!0},saveAuthor:function(){this.$emit("save-author",this.author),this.isEdit=!1}}},c=h,d=n("2877"),f=Object(d["a"])(c,s,l,!1,null,"76160a92",null),v=f.exports,p={components:{Loader:i["a"],Author:v},name:"AuthorList",data:function(){return{loading:!1,authors:[],author:null}},methods:{loadAuthors:function(){var t=this;this.loading=!0,fetch("/api/authors").then((function(t){return t.json()})).then((function(o){return t.authors=o})),this.loading=!1},viewAuthor:function(t){this.author=t},saveAuthor:function(t){if(t.id){var o={method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};fetch("/api/authors",o),console.log("Сохранение автора "+o.body)}else{var n={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};fetch("/api/authors",n),console.log("Добавление автора "+n.body)}this.author=null},addAuthor:function(){this.author={id:null,name:""}},deleteAuthor:function(t){fetch("/api/authors/"+t.id,{method:"DELETE"}).catch((function(o){return console.log("Error delete by author.id= "+t.id+" "+o)})),this.loadAuthors()},closeAuthor:function(){this.author=null}},mounted:function(){this.loadAuthors()}},m=p,b=(n("88e1"),Object(d["a"])(m,r,a,!1,null,"6442c172",null)),A=b.exports,_={name:"Authors.vue",components:{AuthorList:A}},E=_,y=Object(d["a"])(E,e,u,!1,null,"34dc8f9a",null);o["default"]=y.exports}}]);
//# sourceMappingURL=chunk-0568bb7b.d758337a.js.map